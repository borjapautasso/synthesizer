Emissions 
=================

Emissions are the theoretical outputs from combining a ``Galaxy`` and/or its ``Components`` with an ``EmissionModel`` (though they can also be extracted from a `Grid<../emission_grids/grids.rst>`_ or created explicitly with a user input). In this section, we will cover generating and working with these objects.

Emission Objects 
~~~~~~~~~~~~~~~~

There are two containers for emissions in Synthesizer: the ``Sed`` and the ``LineCollection``, for spectra and emission lines respectively. These objects are used to store the results of emission calculations, and provide methods for manipulating and analysing the emissions. A summary of each of these objects can be found in the following sections. 

... toctree::
   :maxdepth: 1

   emission_objects/sed_example 
   emission_objects/lines_example

Note that the line IDs follow the same convention as in Cloudy, whereby a line is usually represented as ``{atomic or molecular notation} {ionisation state} {wavelength}``. The ionisation state is in the usual astronomical notation, e.g. H 1 for atomic hydrogen, but different for molecules, with the state denoted by '+' or '-' (e.g. HCO+).

In the following examples we show how to interact with a ``LineCollection``, how to compute line ratios, and demonstrate how to generate lines from both a ``Grid`` and a ``Galaxy``.


.. toctree::
   :maxdepth: 1

   lines/lines_example
   lines/line_ratios
   lines/grid_lines


Generating Emissions 
~~~~~~~~~~~~~~~~~~~~~~~~~

Synthesizer currently supports the generation of spectra for both stellar populations and AGN.
Generation of spectra for each `component <../components/components>`_ in a galaxy requires an `emission model <../emission_models/emission_models>`_ defining the different spectra to be generated.
With a model in hand, all that needs to be done is pass that model to the ``get_spectra`` method on a ``component`` or ``galaxy``. 
This will generate ``Sed`` objects (see `here <../sed/sed>`_ for an overview) and attach them to the component / galaxy.

Integrated vs Particle
-----------------------

Synthesizer enables the generation of both integrated spectra (a single spectra per component / galaxy) or "per-particle" spectra (a spectra for each individual particle).
The latter of these is (unsurprisingly) only applicable for particle components (`particle.Stars` and `particle.BlackHoles`), while the former can be generated for both parametric and particle components.
Additionally, galaxy level spectra are, by definition, integrated.

Integrated spectra are generated by ``get_spectra`` methods, and store the resultant spectra in a dictionary called `spectra` on the component / galaxy.
Any particle based components also provide the ``get_particle_spectra`` method, which will produce per--particle spectra, and store the generated spectra in a dictionary called ``particle_spectra`` on the component.
In the linked docs we demonstrate how, using ``EmissionModels`` in conjunction with these methods, you can generate component and galaxy spectra. Additionally, if you have an instrument with a wavelength array (e.g. NIRSpec, 4MOST, DESI, etc.) you can also perform spectroscopy. This is detailed in the spectroscopy docs below.

.. toctree::
   :maxdepth: 1

   lines/galaxy_lines
   spectra/stars
   spectra/blackholes
   spectra/galaxy
   spectra/spectroscopy
